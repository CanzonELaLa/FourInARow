import tkinter as t

DELTA_HEIGHT = 80
DELTA_WIDTH = 180
DELTA_CELL = 109
CELL_PADDING = 13
DEFAULT_STATE = "EMPTY"
FIRST_PLAYER = "Images/Red.gif"
SECOND_PLAYER = "Images/Blue.gif"

class Cell:
    def __init__(self, location, board):
        self.__width_delta = location[0]
        self.__height_delta = location[1]
        self.__chip = Chip(DEFAULT_STATE)
        self.__location = location
        self.__board = board

    def get_location(self):
        return self.__location

    def set_chip(self, player):
        self.__chip.set_player(player)

    def get_chip(self):
        return self.__chip


class Board:
    def __init__(self, canvas, size=(7, 6)):
        self.__width = size[0]
        self.__canvas = canvas
        self.__height = size[1]
        self.__columns = []

        for i in range(7):
            column = []
            for j in range(6):
                column.append(Cell((DELTA_WIDTH + DELTA_CELL * i +
                                    CELL_PADDING,
                                    DELTA_HEIGHT + DELTA_CELL * j +
                                    CELL_PADDING), self))
            column.reverse()
            self.__columns.append(column)

    def add_chip(self, column, player):
        row = -1
        for i in range(len(self.__columns[column])):
            if self.__columns[column][i].get_chip().get_player() == \
                    DEFAULT_STATE:
                row = i
                self.__columns[column][i].get_chip().set_player(player)
                break
        if row == -1:
            return False

        cell = self.__columns[column][row]

        self.__set_cell(player, column, row)
        if player == "first":
            file = FIRST_PLAYER
        else:
            file = SECOND_PLAYER

        chip = t.PhotoImage(file=file)
        self.__canvas.create_image(cell.get_location()[0],
                                   cell.get_location()[1], image=chip,
                                   anchor="nw")
        return True

    def __set_cell(self, player, column, row):
        self.__columns[column][row].get_chip().set_player(player)

    def get_columns(self):
        return self.__columns


class Chip:
    def __init__(self, player):
        self.__player = player

    def get_player(self):
        return self.__player

    def set_player(self, player):
        self.__player = player



root = t.Tk()
root.resizable(width=False, height=False)
canvas = t.Canvas(root, width=1200, height=800)
bg = t.PhotoImage(file="Images/Board.gif")
canvas.pack()
canvas.create_image(DELTA_WIDTH, DELTA_HEIGHT, image=bg, anchor="nw")
board = Board(canvas)



blue = t.PhotoImage(file="Images/Blue.gif")
# red = t.PhotoImage(file="Images/Red.gif")
canvas.create_image(CELL_PADDING + DELTA_WIDTH, CELL_PADDING + DELTA_HEIGHT,
                   image=blue, anchor="nw")

board.add_chip(0, "first")
board.add_chip(0, "first")
board.add_chip(0, "first")
board.add_chip(0, "first")
root.mainloop()
